# jobmon_client cluster IP. Used for communication between k8s deployments.
# Eg traefik -> jobmon_client
# Allows hostname "jobmon-client" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-client
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: web
      port: 80
  selector:
    app: jobmon-client

# jobmon_scheduler cluster IP. Used for communication between k8s deployments.
# Eg traefik -> jobmon_scheduler
# Allows hostname "jobmon-scheduler" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-scheduler
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: web
      port: 80
  selector:
    app: jobmon-scheduler

# jobmon_swarm cluster IP. Used for communication between k8s deployments.
# Eg traefik -> jobmon_swarm
# Allows hostname "jobmon-swarm" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-swarm
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: web
      port: 80
  selector:
    app: jobmon-swarm

# jobmon_worker cluster IP. Used for communication between k8s deployments.
# Eg traefik -> jobmon_worker
# Allows hostname "jobmon-worker" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-worker
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: web
      port: 80
  selector:
    app: jobmon-worker

# Viz Server cluster IP. Used for communication between k8s deployments.
# Eg traefik -> viz server
# Allows hostname "jobmon-cli" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-cli
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: web
      port: 80
  selector:
    app: jobmon-cli

# Influxdb cluster IP. Used for communication between k8s deployments.
# Eg traefik -> influxdb and grafana -> influxdb
# Allows hostname "influxdb" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: influxdb
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: influxdb-http
      port: 8086
  selector:
    app: influxdb

# Influxdb cluster IP. Used for communication between k8s deployments.
# Eg traefik -> grafana
# Allows hostname "grafana" to resolve inside k8s containers
---
apiVersion: v1
kind: Service
metadata:
  name: grafana
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: grafana
      port: 3000
  selector:
    app: grafana

# Logstash cluster IP, endpoint for Jobmon service logs
# Allows hostname "logstash" to resolve inside Jobmon containers
---
apiVersion: v1
kind: Service
metadata:
  name: logstash
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: logstash
      port: 5000
  selector:
    app: logstash

# Elasticsearch cluster IP, endpoint for logstash and source for Kibana
# Allows hostname "elasticsearch" to resolve inside ELK containers
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearch
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: elasticsearch
      port: 9200
  selector:
    app: elasticsearch

# Kibana cluster IP
---
apiVersion: v1
kind: Service
metadata:
  name: kibana
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: kibana
      port: 5601
  selector:
    app: kibana

# APM cluster IP
---
apiVersion: v1
kind: Service
metadata:
  name: jobmon-apm
spec:
  type: ClusterIP
  ports:
    - protocol: TCP
      name: jobmon-apm
      port: 8200
  selector:
    app: jobmon-apm
>>>>>>> release/hyrax
